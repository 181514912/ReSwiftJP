#!/bin/bash

update_jazzy() {
  REPO=$1
  BRANCH=$2
  DEST=vendor/jazzy

  if [ -d "$DEST" ]; then
    git -C "$DEST" pull origin "$BRANCH"
  else
    git clone --depth 1 --branch "$BRANCH" "$REPO" "$DEST"
  fi

  bundle install --gemfile="$DEST/Gemfile"
}

generate_docs__org_name_branch() {
  ORGANISATION=$1
  NAME=$2
  BRANCH=$3

  GITHUB=https://github.com/$ORGANISATION/$NAME
  REPO="$GITHUB.git"

  if [ -d "$NAME" ]; then
    git -C "$NAME" pull origin "$BRANCH"
  else
    git clone --depth 1 --branch "$BRANCH" "$REPO" "$NAME"
  fi

  pushd "$NAME"
  PATH=../vendor/jazzy/bin:$PATH OUTPUT_PATH="../$BRANCH" ./generate_docs.sh
  popd
}